{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags static %}

{% block body_class %}template-feedbackpage{% endblock %}

{% block content %}
    <section class="f3 pa3 ph4 ph3-m ph3-l tl lh-copy lm-dark-blue segoe feedback-section">
      <div class="w-60-ns center">
        <a href="/" class="f5 link dib ph3 pv2 br1 pointer nunito tracked inner-shadow-active lm-gb-white lm-bg-dark-blue-hover lm-dark-blue lm-white-hover ba b--lm-dark-blue">< Back</a>
      </div>
    </section>

    <form action="{% pageurl page %}" method="POST" class="lm-ls1" id="feedback-form">
      {% csrf_token %}

      {% for row in custom_form %}
        {% if row.field_type == 'radio' %}
          <section class="f3 pa3 ph4 ph3-m ph3-l tl lh-copy lm-dark-blue nunito feedback-form-section">
            <div class="w-60-ns center">
              <div class="around_form_input">
                {{row.before_input|richtext}}
              </div>
              {% if row.errors %}
                {% for error in row.errors %}
                  <div class="alert ma0 mb1 mr1 mt4 pa3 ba bw1-ns bg--lm-light-red b--dark-red relative black mt1 f5"><i class="bg--lm-dark-red white absolute br-100 fa fa-exclamation lm-flash-icon lm-exclamation-icon"></i>{{error}}</div>
                {% endfor %}
              {% endif %}
              <div id="id_{{row.label}}" class="mv2 pv2">
                {% for choice in row.choices %}
                  <div class="mv1 h18">
                    <input id="id_{{row.label}}_{{forloop.counter0}}" name="{{row.label}}" type="radio" value="{{choice.val}}" {{row.reqired}} class="absolute o-0 lm-feedback-radio" {{choice.checked}}></input>
                    <label for="id_{{row.label}}_{{forloop.counter0}}" class="lm-feedback-label word-wrap f6 v-top">{{choice.val}}</label>
                  </div>
                {% endfor %}
              </div>
              <div class="around_form_input">
                {{row.after_input|richtext}}
              </div>
            </div>
        </section>
        {% else %}
          {% if row.field_type == 'multiline' %}
            <section class="f3 pt3 ph4 ph3-m ph3-l tl lh-copy pb3 segoe feedback-section">
              <div class="w-60-ns center">
                <div class="around_form_input">
                  {{row.before_input|richtext}}
                </div>
                {% if row.errors %}
                  {% for error in row.errors %}
                    <div class="alert ma0 mb1 mr1 mt4 pa3 ba bw1-ns bg--lm-light-red b--dark-red relative black mt1 f5"><i class="bg--lm-dark-red white absolute br-100 fa fa-exclamation lm-flash-icon lm-exclamation-icon"></i>{{error}}</div>
                  {% endfor %}
                {% endif %}
                <label for="id_{{row.label}}" class="dn"></label>
                <textarea id="id_{{row.label}}" name="{{row.label}}" class="h4 f5 w-100 pa3 nr b--lm-grey" {{required}}>{{row.submitted_val}}</textarea>
                <div class="around_form_input">
                  {{row.after_input|richtext}}
                </div>
              </div>
            </section>
          {% else %}
            {% if row.field_type == 'email' and forloop.last %}
              <section class="f3 pa3 ph4 ph3-m ph3-l tl lh-copy segoe feedback-section">
                <div id="alphasection" class="w-60-ns nunito center f5">
                  <div class="around_form_input">
                    {{row.before_input|richtext}}
                  </div>
                  {% if row.errors %}
                    {% for error in row.errors %}
                      <div class="alert ma0 mb1 mr1 mt4 pa3 ba bw1-ns bg--lm-light-red b--dark-red relative black mt1 f5"><i class="bg--lm-dark-red white absolute br-100 fa fa-exclamation lm-flash-icon lm-exclamation-icon"></i>{{error}}</div>
                    {% endfor %}
                  {% endif %}
                  <label for="id_{{row.label}}">Email: </label>
                  <input id="id_{{row.label}}" name="{{row.label}}" type="email" {{required}}>{{row.submitted_val}}</input>
                  <div class="w-100 tr mt3">
                    <button type="submit" class="f5 link dib ph3 pv2 br1 pointer nunito tracked inner-shadow-active lm-white lm-bg-dark-blue button lm-bg-orange-hover lm-dark-blue-hover">Submit</button>
                  </div>
                </div>
              </section>
            {% endif %}
          {% endif %}
        {% endif %}
      {% endfor %}
    </form>
    <section id="email_form" class="lm-white lm-bg-dark-blue pa1 ph4 ph3-m ph3-l pb4 pb5-l">
      <div id="alpha" class="mv3 w-60-ns center">
        {{page.alphatext|richtext}}
      </div>
    </section>
{% endblock %}
